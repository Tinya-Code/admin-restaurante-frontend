
<header class="sticky top-0 z-50 w-full bg-white border-b border-gray-200 shadow-sm">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">
      <!-- Logo Section -->
      <a routerLink="/admin/home" class="flex items-center gap-3 sm:gap-4">

          <img
            [src]="getDisplayLogo()"
            alt="Logo"
            class="h-13 w-13  rounded-full object-contain"
          />

      </a>
  
      <!-- User Menu -->
      <div class="relative">
        <button
          type="button"
          (click)="toggleMenu()"
          class="flex items-center gap-2 sm:gap-3 px-2 sm:px-3 py-2 rounded-sm hover:bg-gray-50 transition-colors"
        >
          <!-- User Avatar -->
          <div class="relative">
            @if (user()?.avatar) {
              <img
                [src]="user()?.avatar"
                [alt]="user()?.name"
                class="w-8 h-8 sm:w-9 sm:h-9 rounded-full object-cover border-2 border-gray-200"
                (error)="$event.target.style.display = 'none'"
              />
            } @else {
              <div
                class="w-8 h-8 sm:w-9 sm:h-9 rounded-full bg-gray-200 flex items-center justify-center border-2 border-gray-300"
              >
                <span class="text-xs sm:text-sm font-medium text-gray-600">
                  {{ getUserInitials() }}
                </span>
              </div>
            }

            <!-- Online indicator (optional) -->
            <span
              class="absolute bottom-0 right-0 block h-2.5 w-2.5 rounded-full bg-green-500 ring-2 ring-white"
            ></span>
          </div>

          <!-- User Info (hidden on mobile) -->
          <div class="hidden md:flex flex-col items-start min-w-0">
            <span class="text-sm font-medium text-gray-900 truncate max-w-[150px]">
              {{ user()?.name }}
            </span>
            <span class="text-xs text-gray-500 truncate max-w-[150px]">
              {{  "Admin" }}
            </span>
          </div>

          <!-- Chevron Icon -->
          <lucide-angular
            [img]="chevronDown"
            class="w-4 h-4 text-gray-500 transition-transform"
            [class.rotate-180]="isMenuOpen()"
          />
        </button>

        <!-- Dropdown Menu -->
        @if (isMenuOpen()) {
          <div
            class="absolute right-0 mt-2 w-56  bg-white border border-gray-200 rounded-sm shadow-lg z-50"
          >
            <!-- User Info Card (mobile only) -->
            <div class="md:hidden px-4 py-3 border-b border-gray-200">
              <p class="text-sm font-medium text-gray-900 truncate">
                {{ user()?.name }}
              </p>
              <p class="text-xs text-gray-500 truncate mt-0.5">
                {{ user()?.email }}
              </p>
            </div>

            <!-- Menu Items -->
            <div class="py-1">
              <!-- Profile -->
              <button
                type="button"
                (click)="goToProfile()"
                class="w-full flex items-center gap-3 px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50 transition-colors"
              >
                <lucide-angular [img]="userIcon" class="w-4 h-4 text-gray-500" />
                <span>Mi Perfil</span>
              </button>

              <!-- Settings -->
              <button
                type="button"
                (click)="goToSettings()"
                class="w-full flex items-center gap-3 px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50 transition-colors"
              >
                <lucide-angular [img]="settings" class="w-4 h-4 text-gray-500" />
                <span>Configuración</span>
              </button>

              <!-- Divider -->
              <div class="border-t border-gray-200 my-1"></div>

              <!-- Logout -->
              <button
                type="button"
                (click)="logout()"
                class="w-full flex items-center gap-3 px-4 py-2.5 text-sm text-red-600 hover:bg-red-50 transition-colors"
              >
                <lucide-angular [img]="logOut" class="w-4 h-4" />
                <span>Cerrar sesión</span>
              </button>
            </div>
          </div>
        }
      </div>
    </div>
  </div>
</header>

<!-- Overlay para cerrar menú al hacer click fuera -->
@if (isMenuOpen()) {
  <div class="fixed inset-0 z-40" (click)="closeMenu()"></div>
}

